// ////////////////////////////////////////////////////////////////////////// //
Actor K8Gore_TinyBlood$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  game Doom
  scale 0.2
  speed 7
  health 1
  radius 8
  height 1
  +DontSplash
  Gravity 0.1 //0.7
  Decal K8GoreBloodSplat$(Color)
  +MISSILE
  +CLIENTSIDEONLY
  +NOTELEPORT
  +NOBLOCKMAP
  +FORCEXYBILLBOARD
  -EXPLODEONWATER
  +DOOMBOUNCE
  BounceFactor 0.01

  States {
    Spawn:
      TNT1 A 0
      //TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
#ifndef TRANSIENT
      BLUX A 500
      Stop
#else
    TinFade:
      BLUX A 2 A_FadeOut(0.01)
      Loop
#endif

    NoSpawn:
      TNT1 A 0
      Stop

    Splash:
      BLOD A 0
      //TNT1 AAA 0 A_CustomMissile("K8Gore_Underblood1$(Color)", 7, 0, random(0, 360), 2, random(30, 150))
      Stop

    Death:
      TNT1 A 0
      TNT1 A 0 A_PlaySound("blooddrop3")
#ifndef TRANSIENT
      XDT1 EFGHIJKL 2
#else
      XDT1 EFGHIJKL 2 A_FadeOut(0.1)
#endif
      Stop
  }
}


#ifndef TRANSIENT
Actor K8Gore_Blood$(Color) Replaces Blood$(Color) {
#else
Actor K8Gore_Blood$(Color) {
#endif
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  Decal K8GoreBloodSplat$(Color)
  game Doom
  +FORCEXYBILLBOARD
  +NOGRAVITY
  +THRUACTORS
  +CLIENTSIDEONLY
  -ALLOWPARTICLES
  Scale 0.5
  Speed 0

  States {
    Spawn:
      TNT1 A 0
      //TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
#ifndef TRANSIENT
      TNT1 AAAAAAAA 0 {
        if (GetCVar("k8GoreOpt_BloodAmount") >= 3) {
          //A_k8ConLog("BLOODBATH 0!");
          A_CustomMissile("K8Gore_FlyingBloodFake$(Color)", 0, 0, random(0, 360), 2, random(0, 90));
        }
      }
      /*
      TNT1 A 0 A_CustomMissile("K8Gore_FlyingBloodLevel3$(Color)", 7, 0, random(0, 360), 2, random(40, 60))
      TNT1 A 0 A_CustomMissile("K8Gore_FlyingBlood$(Color)", 7, 0, random(0, 360), 2, random(20, 40))
      TNT1 A 0 A_CustomMissile("K8Gore_BloodmistSmall$(Color)", 0, 0, random(0, 360), 2, random(10, 40))
      TNT1 A 0 A_CustomMissile("K8Gore_BloodHit$(Color)", 0, 0, random(0, 360), 2, random(0, 90))
      */
      TNT1 A 0 {
        if (GetCVar("k8GoreOpt_BloodAmount") >= 3) A_CustomMissile("K8Gore_FlyingBloodLevel3$(Color)", 7, 0, random(0, 360), 2, random(40, 60));
        if (GetCVar("k8GoreOpt_BloodAmount") >= 2) A_CustomMissile("K8Gore_FlyingBlood$(Color)", 7, 0, random(0, 360), 2, random(20, 40));
        if (GetCVar("k8GoreOpt_BloodAmount") >= 1) A_CustomMissile("K8Gore_BloodmistSmall$(Color)", 0, 0, random(0, 360), 2, random(10, 40));
        if (GetCVar("k8GoreOpt_BloodAmount") >= 0) A_CustomMissile("K8Gore_BloodHit$(Color)", 0, 0, random(0, 360), 2, random(0, 90));
      }
#else
      TNT1 AAAA 0 {
        if (GetCVar("k8GoreOpt_BloodAmount") >= 3) {
          //A_k8ConLog("BLOODBATH 1!");
          A_CustomMissile("K8Gore_FlyingBloodFake$(Color)", 0, 0, random(0, 360), 2, random(0, 90));
        }
      }
      /*
      TNT1 A 0 A_CustomMissile("K8Gore_FlyingBlood$(Color)", 7, 0, random(0, 360), 2, random(30, 60))
      TNT1 A 0 A_CustomMissile("K8Gore_FlyingBlood$(Color)", 7, 0, random(0, 360), 2, random(30, 60))
      TNT1 A 0 A_CustomMissile("K8Gore_BloodHit$(Color)", 0, 0, random(0, 360), 2, random(0, 90))
      */
      TNT1 A 0 {
        if (GetCVar("k8GoreOpt_BloodAmount") >= 2) A_CustomMissile("K8Gore_FlyingBlood$(Color)", 7, 0, random(0, 360), 2, random(40, 60));
        if (GetCVar("k8GoreOpt_BloodAmount") >= 1) A_CustomMissile("K8Gore_FlyingBlood$(Color)", 7, 0, random(0, 360), 2, random(20, 40));
        if (GetCVar("k8GoreOpt_BloodAmount") >= 0) A_CustomMissile("K8Gore_BloodHit$(Color)", 0, 0, random(0, 360), 2, random(0, 90));
      }
#endif
      Stop

    Splash:
      BLOD A 0
      //TNT1 AAA 0 A_CustomMissile("K8Gore_Underblood1$(Color)", 7, 0, random(0, 360), 2, random(30, 150))
      Stop

    Spray:
      Goto Spawn
  }
}


Actor K8Gore_BloodHit$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  height 8
  radius 4
  +NOBLOCKMAP
  +NOGRAVITY
  +NOCLIP
  +CLIENTSIDEONLY
  Scale 0.7

  States {
    Spawn:
      TNT1 A 0
#ifndef TRANSIENT
      BLHT ABCDE 1
#else
      BLHT ABCDE 1 A_FadeOut(0.1)
#endif
      Stop
  }
}


////////////////////////////////////////////////////////////////////////////////
Actor K8Gore_FlyingBlood$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  game Doom
  scale 0.5
  speed 4
  health 1
  radius 8
  height 1
  Gravity 0.1 //0.8
  damage 0
  Renderstyle Translucent
  Alpha 0.95
  DamageType Blood
  Decal K8GoreBloodSuper$(Color)
  +MISSILE
  +CLIENTSIDEONLY
  +NOTELEPORT
  +NOBLOCKMAP
  +THRUACTORS
  +BLOODLESSIMPACT
  +FORCEXYBILLBOARD
  +NODAMAGETHRUST
  +MOVEWITHSECTOR
  +CORPSE
  -DONTSPLASH
  Mass 5 //1

  States {
    Spawn:
      TNT1 A 0
      //BLOD ABCD 2
      TNT1 A 0
      //TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      BLOD AB 2
      //TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      TNT1 A 0 A_Jump(255, "Spawn1", "Spawn2")

    Spawn1:
#ifndef TRANSIENT
      BLOD C 1
#else
      BLOD C 1 A_FadeOut(0.01)
#endif
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      Loop

    Spawn2:
#ifndef TRANSIENT
      BLOD E 1
#else
      BLOD E 1 A_FadeOut(0.01)
#endif
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      Loop

    Splash:
      BLOD A 0
      //TNT1 A 0 A_SpawnItem("K8Gore_Underblood2$(Color)")
      Stop

    Death:
      TNT1 A 0
      TNT1 A 0 A_PlaySound("blooddrop2")
      TNT1 A 0
      TNT1 A 0 A_SpawnItem("K8Gore_BloodSpot$(Color)", 0, 1)
      //TNT1 A 0 A_CustomMissile("K8Gore_CeilBloodChecker$(Color)", -15, 0, 90, 2, 90)
      TNT1 A 0 A_SpawnItemEx("K8Gore_DetectCeilBloodSimpler$(Color)",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
      TNT1 A 1
      Stop
   }
}


Actor K8Gore_FlyingBloodLevel3$(Color) : K8Gore_FlyingBlood$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  Scale 1.0
  Speed 5 //7
  Mass 5 //1
}


////////////////////////////////////////////////////////////////////////////////
Actor K8Gore_BloodSpot$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  game Doom
  radius 2
  height 2
  mass 1
  Health 300
  +NOTELEPORT
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  +MOVEWITHSECTOR
  +FLOORCLIP
  +NOTARGET
  -SHOOTABLE
  +NOBLOOD
  -DONTSPLASH
  -SOLID
  +THRUACTORS
  -NOGRAVITY
  -NoLiftDrop
  +NOBLOCKMAP
  Renderstyle Translucent
#ifdef TRANSIENT
  //Alpha 0.6
  Alpha 0.7
#else
  Alpha 0.9
#endif
  Mass 99999999
  Scale 0.5
  Decal K8GoreBloodSplat$(Color)
  DamageFactor "TeleportRemover", 100.0

  States {
    Spawn:
      TNT1 A 0
      TNT1 A 0 A_LayToFloorWithYaw(Random(0, 360))
      //TNT1 A 0 A_SetRollExt(0)
      //TNT1 A 0 A_SetYawExt(Random(0, 360))
      //TNT1 A 0 A_SetPitchExt(0)
      TNT1 A 0 A_SetScaleXExt(Random(3, 9)/10.0)
      TNT1 A 0 A_CheckFloorTextureGlob("*water*", "SplashWater", AAPTR_DEFAULT, false)
      TNT1 A 0 A_CheckFloorTextureGlob("*nukage*", "SplashWater", AAPTR_DEFAULT, false)
      TNT1 A 0 A_CheckFloorTextureGlob("*lava*", "SplashWater", AAPTR_DEFAULT, false)
      TNT1 A 0 A_CheckFloorTextureGlob("*blood*", "SplashWater", AAPTR_DEFAULT, false)
      TNT1 A 0 A_CheckFloorTextureGlob("*slime*", "SplashWater", AAPTR_DEFAULT, false)
      TNT1 A 0 A_JumpIf(waterlevel > 1, "SplashWater")

    SpawnNormally:
      TNT1 A 0 A_Jump(255, "SpawnBFrameOnly", "SpawnCFrameOnly", "SpawnDFrameOnly")

    SpawnAFrameOnly:
#ifdef TRANSIENT
      BPDL A random(100,850)
      Goto FadeA
#else
      BPDL A 800
      Loop
#endif

    SpawnBFrameOnly:
#ifdef TRANSIENT
      BPDL B random(100,850)
      Goto FadeB
#else
      BPDL B 800
      Loop
#endif

    SpawnCFrameOnly:
#ifdef TRANSIENT
      BPDL C random(100,850)
      Goto FadeC
#else
      BPDL C 800
      Loop
#endif

    SpawnDFrameOnly:
#ifdef TRANSIENT
      BPDL D random(100,850)
      Goto FadeD
#else
      BPDL D 800
      Loop
#endif

    FadeA:
      BPDL AAAA 64
      TNT1 A 0 A_FadeOut(0.01)
      Loop

    FadeB:
      BPDL B 64
      TNT1 A 0 A_FadeOut(0.01)
      Loop

    FadeC:
      BPDL C 64
      TNT1 A 0 A_FadeOut(0.01)
      Loop

    FadeD:
      BPDL D 64
      TNT1 A 0 A_FadeOut(0.01)
      Loop

    Splash:
      Goto SpawnNormally

    SplashWater:
      TNT1 A 0 A_FadeOut(0.3)
      TNT1 A 0 A_Jump(255, "SpawnBFrameOnlyWater", "SpawnCFrameOnlyWater", "SpawnDFrameOnlyWater")

    SpawnAFrameOnlyWater:
      BPDL A random(50, 100)
      Goto FadeAWater

    SpawnBFrameOnlyWater:
      BPDL B random(50, 100)
      Goto FadeBWater

    SpawnCFrameOnlyWater:
      BPDL C random(50, 100)
      Goto FadeCWater

    SpawnDFrameOnlyWater:
      BPDL D random(50, 100)
      Goto FadeDWater

    FadeAWater:
      BPDL A 16
      TNT1 A 0 A_FadeOut(0.05)
      Loop

    FadeBWater:
      BPDL B 16
      TNT1 A 0 A_FadeOut(0.05)
      Loop

    FadeCWater:
      BPDL C 16
      TNT1 A 0 A_FadeOut(0.05)
      Loop

    FadeDWater:
      BPDL D 16
      TNT1 A 0 A_FadeOut(0.05)
      Loop

    Death:
      TNT1 A 0 A_NoBlocking
      Stop
  }
}


////////////////////////////////////////////////////////////////////////////////
Actor K8Gore_DetectCeilBloodSimpler$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  game Doom
  scale 0.4
  speed 0
  health 1
  radius 1
  height 1
  Gravity 0.0
  damage 0
  Renderstyle None
  //Renderstyle Translucent
  //Alpha 0.95
  DamageType Blood
  +MISSILE
  +CLIENTSIDEONLY
  +NOTELEPORT
  +NOBLOCKMAP
  +NODAMAGETHRUST
  -DONTSPLASH
  +NOGRAVITY

  States {
    Spawn:
      TNT1 A 0
      //TNT1 A 0 A_JumpIfCVarFalse("k8GoreOpt_CeilBlood", "DeathExit");
      TNT1 A 0 {
        if (!GetCVar("k8GoreOpt_CeilBlood")) return state("Null"); // die
        if (GetCVar("k8GoreOpt_BloodAmount") < 2) return state("Null"); // die
        //A_k8ConLog(va("CB0: k8GoreOpt_BloodAmount=%s", GetCVar("k8GoreOpt_BloodAmount")));
      }
      //TNT1 A 0 A_k8ConLog("K8Gore_DetectCeilBloodSimpler: spawn");
      TNT1 A 0 ThrustThingZ(0,35*4,0,1)
      TNT1 A 2
      Stop

    Death:
      //TNT1 A 0 A_k8ConLog("K8Gore_DetectCeilBloodSimpler: death");
      TNT1 A 0
      //TNT1 A 0 A_JumpIfCVarFalse("k8GoreOpt_CeilBlood", "DeathExit");
      TNT1 A 0 {
        if (!GetCVar("k8GoreOpt_CeilBlood")) return state("Null"); // die
        if (GetCVar("k8GoreOpt_BloodAmount") < 2) return state("Null"); // die
        //A_k8ConLog(va("CB1: k8GoreOpt_BloodAmount=%s", GetCVar("k8GoreOpt_BloodAmount")));
      }
      TNT1 A 0 A_CustomMissile("K8Gore_CeilBloodChecker$(Color)", -15, 0, 90, 2, 90)
      Stop
  }
}


// Checks if there is a ceiling above, and isn't hitting a monster.
Actor K8Gore_CeilBloodChecker$(Color) : K8Gore_FlyingBlood$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  +THRUACTORS
  +BLOODLESSIMPACT
  damagetype Blood
  damage 0
  Radius 0
  Height 0
  Speed 400
  Gravity 0.0
  Decal K8GoreBloodSuper$(Color)

  States {
    Spawn:
      TNT1 A 0
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      TNT1 A 4
      Stop

    Splash:
      BLOD A 0
      Stop

    Death:
      TNT1 A 1 A_SpawnItem("K8Gore_CeilBloodSpot$(Color)",0,0,0,1)
      TNT1 A 5
      Stop

    Xdeath:
      TNT1 A 1
      Stop
  }
}


// The Ceil Blood Spot.
Actor K8Gore_CeilBloodSpot$(Color) : K8Gore_BloodSpot$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  Projectile
  +SPAWNCEILING
  +CEILINGHUGGER
  +MOVEWITHSECTOR
  -DOOMBOUNCE
  +NOGRAVITY
  +DontSplash

  States {
    Spawn:
      TNT1 A 0
      BPDL A 1
      TNT1 A 0 A_SpawnItem("K8Gore_DripingBloodLeavesSmallPool$(Color)")
      TNT1 A 0 A_SpawnItem("K8Gore_CeilBloodTinyBloodSpawner$(Color)")
      BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
#ifndef TRANSIENT
      BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
#endif
      BPDL AAAAAAAAA 1 A_FadeOut(0.1)
      Stop
  }
}


Actor K8Gore_CeilBloodTinyBloodSpawner$(Color) : K8Gore_TinyBlood$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  +NOGRAVITY
  +THRUACTORS
  +NOCLIP

  States {
    Spawn:
      TNT1 A 0
      TNT1 AAAAAAAAAAAAAA 5 A_SpawnItemEx("K8Gore_BloodDripingFromCeiling$(Color)", random(-5, 5), random(-5, 5))
      TNT1 AAAAAAAAAAAAAA 10 A_SpawnItemEx("K8Gore_BloodDripingFromCeiling$(Color)", random(-5, 5), random(-5, 5))
      TNT1 AAAAAAAAAAAAAA 16 A_SpawnItemEx("K8Gore_BloodDripingFromCeiling$(Color)", random(-5, 5), random(-5, 5))
      TNT1 AAAAAAAAAAAAAA 24 A_SpawnItem("K8Gore_BloodDripingFromCeiling$(Color)")
      Stop
  }
}


Actor K8Gore_BloodDripingFromCeiling$(Color) : K8Gore_TinyBlood$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  +DOOMBOUNCE
  +THRUACTORS
  +CLIENTSIDEONLY
  BounceFactor 0.1

  States {
    Spawn:
      TNT1 A 0
      BPDL A 0 ThrustThingZ(0,300,0,1)
      TNT1 A 0 A_Jump(230, "NoSpawn")
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
#ifndef TRANSIENT
      BLUX A 500
#else
      BLUX A 100 A_FadeOut(0.1)
#endif
      Loop
  }
}


Actor K8Gore_DripingBloodLeavesSmallPool$(Color) : K8Gore_TinyBlood$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  -DONTSPLASH
  scale 0.3

  States {
    Spawn:
      TNT1 A 0
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      BLUX A 4
      Goto Death

    Splash:
      BLOD A 0
      Stop

    Death:
      TNT1 A 0
      TNT1 A 0 A_SpawnItem("K8Gore_MinuscleBloodSpot$(Color)")
      TNT1 A 0 A_PlaySound("blooddrop2")
#ifndef TRANSIENT
      XDT1 EFGHIJKL 2
#else
      XDT1 EFGHIJKL 2 A_FadeOut(0.1)
#endif
      Stop
  }
}


/*
Actor K8Gore_MiniBloodDropEffect$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  +CLIENTSIDEONLY
  +NOBLOCKMAP
  +FLOORCLIP
  Scale 0.4

  States {
    Spawn:
      TNT1 A 0
      XDT1 EFGHIJK 2
      Stop
  }
}
*/


Actor K8Gore_MinuscleBloodSpot$(Color) : K8Gore_BloodSpot$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  game Doom
  radius 2
  height 2
  mass 1
  Health 300
  +NOTELEPORT
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  +MOVEWITHSECTOR
  +FLOORCLIP
  +NOTARGET
  -SHOOTABLE
  +NOBLOOD
  -DONTSPLASH
  -SOLID
  +THRUACTORS
  Alpha 0.9
  Mass 99999999
  Scale 0.25
  Decal K8GoreBloodSplat$(Color)
  DamageFactor "TeleportRemover", 100.0

  States {
    Spawn:
      TNT1 A 0
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      TNT1 A 1
      TNT1 A 0 A_CheckFloor("SpawnNormally")
      Goto Splash

    SpawnNormally:
      TNT1 A 0 A_Jump(255, "SpawnBFrameOnly", "SpawnCFrameOnly", "SpawnDFrameOnly")

    SpawnAFrameOnly:
      BPDL A 800
      Goto FadeA

    SpawnBFrameOnly:
      BPDL B 800
      Goto FadeB

    SpawnCFrameOnly:
      BPDL C 800
      Goto FadeC

    SpawnDFrameOnly:
      BPDL D 800
      Goto FadeD

    FadeA:
      BPDL AAAA 1 A_FadeOut(0.01)
      Loop

    FadeB:
      BPDL BBBB 1 A_FadeOut(0.01)
      Loop

    FadeC:
      BPDL CCCC 1 A_FadeOut(0.01)
      Loop

    FadeD:
      BPDL DDDD 1 A_FadeOut(0.01)
      Loop

    Splash:
      BLOD AAAAA 1 A_FadeOut(0.01)
      Loop

    Death:
      TNT1 A 0
      TNT1 A 0 A_NoBlocking
      Stop
  }
}


// Blood trails spawned by FlyingBlood
Actor K8Gore_FlyingBloodTrail$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  game Doom
  scale 0.70
  mass 1
  renderstyle Translucent
  alpha 0.7
  Decal K8GoreBloodSplat$(Color)
  +LOWGRAVITY
  +NOTELEPORT
  +NOBLOCKMAP
  +NOCLIP
  +FORCEXYBILLBOARD
  +CLIENTSIDEONLY
  +DontSplash
  +MISSILE
  -NOGRAVITY
  Speed 2

  States {
    Spawn:
      TNT1 A 0
      //TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      BTRL CCCCCCCCCC 4
      Stop

    Death:
      TNT1 A 0
      Stop

    Splash:
      BLOD A 0
      //TNT1 A 0 A_SpawnItem("K8Gore_Underblood2$(Color)")
      Stop
  }
}


Actor K8Gore_GrowingBloodPool$(Color) : K8Gore_BloodSpot$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  game Doom
  radius 1
  height 1
  mass 1
  Health 600
  //StencilColor "49 00 00"
  Renderstyle Translucent
  Alpha 0.8
  +NOTELEPORT
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  +MOVEWITHSECTOR
  +FLOORCLIP
  +MISSILE
  -DONTSPLASH
  Scale 1.0
  Decal K8GoreBloodSplat$(Color)

  States {
    Spawn:
      TNT1 A 0
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      TNT1 A 0 A_LayToFloorWithYaw(Random(0, 360))
      //TNT1 A 0 A_SetRollExt(0)
      //TNT1 A 0 A_SetYawExt(Random(0, 360))
      //TNT1 A 0 A_SetPitchExt(0)
      TNT1 A 0 A_SetScaleXExt(Random(6, 12)/10.0)
      TNT5 A 1
      TNT5 A 30
      TNT5 BCD 5
      TNT5 EFGHIJKLMNOP 5
      TNT5 QRSTUVWXYZ 5

    Live:
      TNT5 Z 900
      Loop

    Splash:
      BLOD A 0
      Stop
  }
}


Actor K8Gore_GrowingBloodPool2$(Color) : K8Gore_BloodSpot$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  game Doom
  radius 1
  height 1
  mass 1
  Health 600
  //StencilColor "49 00 00"
  Renderstyle Translucent
  Alpha 0.8
  +NOTELEPORT
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  +MOVEWITHSECTOR
  +FLOORCLIP
  +MISSILE
  -DONTSPLASH
  Scale 1.0
  Decal K8GoreBloodSplat$(Color)

  States {
    Spawn:
      TNT1 A 0
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      TNT1 A 0 A_LayToFloorWithYaw(Random(0, 360))
      //TNT1 A 0 A_SetRollExt(0)
      //TNT1 A 0 A_SetYawExt(Random(0, 360))
      //TNT1 A 0 A_SetPitchExt(0)
      TNT1 A 0 A_SetScaleXExt(Random(6, 12)/10.0)
      TNT5 A 1
      TNT5 A 30
      TNT5 BCD 5
      TNT5 EFGHIJKLMNOP 5
      TNT5 QRSTUVWXYZ 5

    Live:
      TNT5 Z 900 //duration
      /*
      TNT1 A 0 {
        if (GetCVar("k8GoreBloodTransient") != 0) { return state("Splash"); }
        return state("Live");
      }
      */
      Loop

    Splash:
      BLOD A 0
      Stop
  }
}


Actor K8Gore_FlyingBloodFake$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  game Doom
  scale 0.5
  speed 3
  health 1
  radius 8
  height 1
  Gravity 0.1
  damage 0
  Renderstyle Translucent
  Alpha 0.95
  DamageType Blood
  Decal K8GoreBloodSplat$(Color)
  +MISSILE
  +CLIENTSIDEONLY
  +NOTELEPORT
  +NOBLOCKMAP
  +BLOODLESSIMPACT
  +FORCEXYBILLBOARD
  +NODAMAGETHRUST
  +MOVEWITHSECTOR
  +CORPSE
  -DONTSPLASH
  +THRUACTORS
  Mass 4 //1

  States {
    Spawn:
      TNT1 A 0
      //TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      BLOD KKKKKKKKKKKK 1 A_FadeOut(0.05)
      Stop

    Splash:
      BLOD A 0
      //TNT1 A 0 A_SpawnItem("K8Gore_Underblood2$(Color)")
      Stop

    Death:
      TNT1 A 10
      Stop
  }
}


Actor K8Gore_FlyingBloodFakeNoDecal$(Color) : K8Gore_FlyingBloodFake$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  Decal None
}


Actor K8Gore_BloodmistSmall$(Color) : K8Gore_FlyingBlood$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
  Decal K8GoreBloodSuper$(Color)
  +MISSILE
  +NOTELEPORT
  +NOBLOCKMAP
  +NOBLOCKMONST
  +DONTSPLASH
  +CLIENTSIDEONLY
  +THRUACTORS
  Scale 0.8
  Radius 2
  Height 2
  Speed 8
  Mass 4
  Gravity 0.1 //0.4
  Scale 0.45
  RenderStyle Translucent
  Alpha 0.7

  States {
    Spawn:
      TNT1 A 0
      MSBL ABCDEFGH 1
      MSBL HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH 1 A_FadeOut(0.005)
      TNT1 A 2
      Stop

    Death:
      TNT1 A 0
      TNT1 A 0 A_CheckFloor("Disappear")
      MSBL HHHHHHHH 1 A_FadeOut(0.1)
      TNT1 A 2
      Stop

    Vanish:
    Disappear:
      TNT1 A 2
      Stop
  }
}


// ////////////////////////////////////////////////////////////////////////// //
#ifndef TRANSIENT
Actor K8Gore_Blood_SplatterReplacer$(Color) : K8Gore_Blood Replaces BloodSplatter$(Color) {
#ifdef BLUE
  Translation "16:48=240:247", "64:79=240:247", "164:167=201:207", "168:191=192:207", "232:235=100:207", "236:239=199:207"
#endif
#ifdef GREEN
  Translation "16:48=112:127", "64:79=112:127", "164:167=117:127", "168:191=112:127", "232:235=119:127", "236:239=123:127"
#endif
}
#endif
