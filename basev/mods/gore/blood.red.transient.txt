Actor K8Gore_BloodSpot_Transient {
  game Doom
  radius 2
  height 2
  Health 300
  +NOTELEPORT
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  +MOVEWITHSECTOR
  +FLOORCLIP
  +NOTARGET
  -SHOOTABLE
  +NOBLOOD
  -DONTSPLASH
  -SOLID
  +THRUACTORS
  Alpha 0.9
  Mass 99999999
  Scale 0.5
  Decal K8GoreBloodSplat_Transient
  DamageFactor "TeleportRemover", 100.0

  States {
    Spawn:
      TNT1 A 0
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")

      TNT1 A 1
      TNT1 A 0 A_CheckFloor("SpawnNormally")
      Goto Splash

    SpawnNormally:
      TNT1 A 0 A_Jump(255, "SpawnBFrameOnly", "SpawnCFrameOnly", "SpawnDFrameOnly")

    SpawnAFrameOnly:
      BPDL A 1//duration
      Goto FadeA

    SpawnBFrameOnly:
      BPDL B 1//duration
      Goto FadeB

    SpawnCFrameOnly:
      BPDL C 1//duration
      Goto FadeC

    SpawnDFrameOnly:
      BPDL D 1//duration
      Goto FadeD

    FadeA:
      BPDL AAAA 15 A_FadeOut(0.01)
      Loop

    FadeB:
      BPDL BBBB 15 A_FadeOut(0.01)
      Loop

    FadeC:
      BPDL CCCC 15 A_FadeOut(0.01)
      Loop

    FadeD:
      BPDL DDDD 15 A_FadeOut(0.01)
      Loop

    Splash:
      BLOD AAAAA 1 A_FadeOut(0.01)
      Loop

    Death:
      TNT1 A 0
      TNT1 A 0 A_NoBlocking
      Stop
  }
}


// ////////////////////////////////////////////////////////////////////////// //
Actor K8Gore_Blood_Transient {
  Decal K8GoreBloodSplat_Transient
  game Doom
  +FORCEXYBILLBOARD
  +NOGRAVITY
  +THRUACTORS
  +CLIENTSIDEONLY
  -ALLOWPARTICLES
  Scale 0.5
  Speed 0

  States {
    Spawn:
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      TNT1 AAAA 0 A_CustomMissile("K8Gore_FlyingBloodFake_Transient", 0, 0, random(0, 360), 2, random(0, 90))
      TNT1 A 0 A_CustomMissile("K8Gore_FlyingBlood_Transient", 7, 0, random(0, 360), 2, random(30, 60))
      TNT1 A 0 A_CustomMissile("K8Gore_FlyingBlood_Transient", 7, 0, random(0, 360), 2, random(30, 60))
      TNT1 A 0 A_CustomMissile("K8Gore_BloodHit_Transient", 0, 0, random(0, 360), 2, random(0, 90))
      Goto Death

    Splash:
      BLOD A 0
      TNT1 AAA 0 A_CustomMissile("K8Gore_Underblood1", 7, 0, random(0, 360), 2, random(30, 150))
      Goto Death

    Death:
      TNT1 A 0
      TNT1 A 0 A_NoBlocking
      Stop
  }
}


// ////////////////////////////////////////////////////////////////////////// //
Actor K8Gore_TinyBlood_Transient {
  game Doom
  scale 0.2
  speed 7
  mass 4
  health 1
  radius 8
  height 1
  +DontSplash
  Gravity 0.1 //0.7
  Decal K8GoreBloodSplat_Transient
  +MISSILE
  +CLIENTSIDEONLY
  +NOTELEPORT
  +NOBLOCKMAP
  +FORCEXYBILLBOARD
  -EXPLODEONWATER
  +DOOMBOUNCE
  BounceFactor 0.01

  States {
    Spawn:
      TNT1 A 0
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")

    TinFade:
      BLUD Z 2 A_FadeOut(0.01)
      Loop

    NoSpawn:
      TNT1 A 0
      Stop

    Splash:
      BLOD A 0
      TNT1 AAA 0 A_CustomMissile("K8Gore_Underblood1", 7, 0, random(0, 360), 2, random(30, 150))
      Stop

    Death:
      TNT1 A 0
      TNT1 A 0 A_PlaySound("blooddrop3")
      XDT1 EFGHIJKL 2 A_FadeOut(0.1)
      TNT1 A 0
      TNT1 A 0 A_NoBlocking
      Stop
  }
}


Actor K8Gore_BloodHit_Transient {
  height 8
  radius 4
  +NOBLOCKMAP
  +NOGRAVITY
  +NOCLIP
  +CLIENTSIDEONLY
  Scale 0.7

  States {
    Spawn:
      TNT1 A 0
      BLHT ABCDE 1 A_FadeOut(0.1)
      Stop
  }
}


Actor K8Gore_FlyingBloodFake_Transient {
  game Doom
  scale 0.5
  speed 3
  health 1
  radius 8
  height 1
  Gravity 0.1
  damage 0
  Renderstyle Translucent
  Alpha 0.95
  DamageType Blood
  Decal K8GoreBloodSplat_Transient
  +MISSILE
  +CLIENTSIDEONLY
  +NOTELEPORT
  +NOBLOCKMAP
  +BLOODLESSIMPACT
  +FORCEXYBILLBOARD
  +NODAMAGETHRUST
  +MOVEWITHSECTOR
  +CORPSE
  -DONTSPLASH
  +THRUACTORS
  Mass 4

  States {
    Spawn:
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      BLOD KKKKKKKKKKKK 1 A_FadeOut(0.05)
      Stop

    Splash:
      BLOD A 0
      TNT1 A 0 A_SpawnItem("K8Gore_Underblood2")
      Stop

    Death:
      TNT1 A 10
      Stop
  }
}


Actor K8Gore_FlyingBlood_Transient {
  game Doom
  scale 0.5
  speed 4
  health 1
  radius 8
  height 1
  Gravity 0.1 //0.8
  damage 0
  Renderstyle Translucent
  Alpha 0.95
  DamageType Blood
  Decal K8GoreBloodSuper_Transient
  +MISSILE
  +CLIENTSIDEONLY
  +NOTELEPORT
  +NOBLOCKMAP
  +THRUACTORS
  +BLOODLESSIMPACT
  +FORCEXYBILLBOARD
  +NODAMAGETHRUST
  +MOVEWITHSECTOR
  +CORPSE
  -DONTSPLASH
  Mass 4

  States {
    Spawn:
      TNT1 A 0
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      BLOD AB 2
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      TNT1 A 0 A_Jump(255, "Spawn1", "Spawn2")

    Spawn1:
      BLOD C 1 A_FadeOut(0.01)
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      Loop

    Spawn2:
      BLOD E 1 A_FadeOut(0.01)
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      Loop

    Splash:
      BLOD A 0
      TNT1 A 0 A_SpawnItem("K8Gore_Underblood2")
      Stop

    Death:
      TNT1 A 0 A_PlaySound("blooddrop2")
      TNT1 A 0
      TNT1 A 0 A_SpawnItem("K8Gore_BloodSpot_Transient", 0, 1)
      TNT1 A 0 A_SpawnItemEx("K8Gore_DetectCeilBloodSimpler_Transient",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
      TNT1 A 1
      Stop
   }
}


Actor K8Gore_FlyingBloodLevel3_Transient : K8Gore_FlyingBlood_Transient {
  Scale 1.0
  Speed 5 //7
  mass 4
}


Actor K8Gore_Bloodmist_Transient : K8Gore_FlyingBlood_Transient {
  decal K8GoreBloodSuper_Transient
  +MISSILE
  +NOTELEPORT
  +NOBLOCKMAP
  +NOBLOCKMONST
  +DONTSPLASH
  +CLIENTSIDEONLY
  +THRUACTORS
  Scale 0.8
  Radius 2
  Height 2
  Speed 8
  mass 4
  Gravity 0.1
  RenderStyle Translucent
  Alpha 0.7

  States {
    Spawn:
      TNT1 A 0
      MSBL ABCDEFGH 1
      MSBL HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH 1 A_FadeOut(0.005)
      TNT1 A 2
      Stop

    Death:
      TNT1 A 0
      TNT1 A 0 A_CheckFloor("Disappear")
      MSBL HHHHHHHH 1 A_FadeOut(0.1)
      TNT1 A 2
      Stop

    Vanish:
    Disappear:
      TNT1 A 2
      Stop
  }
}


Actor K8Gore_BloodmistSmall_Transient : K8Gore_Bloodmist_Transient {
  Scale 0.45
  Gravity 0.1 //0.8
}


Actor K8Gore_BloodmistBig_Transient : K8Gore_Bloodmist_Transient {
  Scale 0.9
  Speed 4
  Gravity 0.1 //0.4
}


// ////////////////////////////////////////////////////////////////////////// //
Actor K8Gore_MinuscleBloodSpot_Transient : K8Gore_BloodSpot_Transient {
  Scale 0.25
}


// ////////////////////////////////////////////////////////////////////////// //
Actor K8Gore_BloodDripingFromCeiling_Transient : K8Gore_TinyBlood_Transient {
  +DOOMBOUNCE
  +THRUACTORS
  +CLIENTSIDEONLY
  BounceFactor 0.1

  States {
    Spawn:
      TNT1 A 0
      BPDL A 0 ThrustThingZ(0,300,0,1)
      TNT1 A 0 A_Jump(230, "NoSpawn")
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      BLUD Z 100 A_FadeOut(0.1)
      Loop
  }
}


Actor K8Gore_CeilBloodTinyBloodSpawner_Transient : K8Gore_TinyBlood_Transient {
  +NOGRAVITY
  +THRUACTORS
  +NOCLIP

  States {
    Spawn:
      TNT1 AAAAAAAAAAAAAA 5 A_SpawnItemEx("K8Gore_BloodDripingFromCeiling_Transient", random(-5, 5), random(-5, 5))
      TNT1 AAAAAAAAAAAAAA 10 A_SpawnItemEx("K8Gore_BloodDripingFromCeiling_Transient", random(-5, 5), random(-5, 5))
      TNT1 AAAAAAAAAAAAAA 16 A_SpawnItemEx("K8Gore_BloodDripingFromCeiling_Transient", random(-5, 5), random(-5, 5))
      TNT1 AAAAAAAAAAAAAA 24 A_SpawnItem("K8Gore_BloodDripingFromCeiling_Transient")
      Stop
  }
}


Actor K8Gore_DripingBloodLeavesSmallPool_Transient : K8Gore_DripingBloodLeavesPool {
  -DONTSPLASH

  States {
    Death:
      TNT1 A 0
      TNT1 A 0 A_SpawnItem("K8Gore_MinuscleBloodSpot_Transient")
      TNT1 A 0 A_PlaySound("blooddrop2")
      XDT1 EFGHIJKL 2 A_FadeOut(0.1)
      Stop
  }
}


// The Ceil Blood Spot
Actor K8Gore_CeilBloodSpot_Transient : K8Gore_BloodSpot_Transient {
  Projectile
  +SPAWNCEILING
  +CEILINGHUGGER
  +MOVEWITHSECTOR
  -DOOMBOUNCE
  +NOGRAVITY
  +DontSplash

  States {
    Spawn:
      BPDL A 1
      TNT1 A 0 A_SpawnItem("K8Gore_DripingBloodLeavesSmallPool_Transient")
      TNT1 A 0 A_SpawnItem("K8Gore_CeilBloodTinyBloodSpawner_Transient")
      BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      //BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      //BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      //BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      //BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      //BPDL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 2 ThrustThingZ(0,300,0,1)
      BPDL AAAAAAAAA 1 A_FadeOut(0.1)
      Stop
  }
}


// checks if there is a ceiling above, and isn't hitting a monster
Actor K8Gore_CeilBloodChecker_Transient : K8Gore_FlyingBlood_Transient {
  +THRUACTORS
  +BLOODLESSIMPACT
  damagetype Blood
  damage 0
  Radius 0
  Height 0
  Speed 400
  Gravity 0.0
  Decal K8GoreBloodSuper_Transient

  States {
    Spawn:
      TNT1 A 0 A_JumpIf(waterlevel > 1, "Splash")
      TNT1 A 4
      Stop

    Splash:
      BLOD A 0
      Stop

    Death:
      TNT1 A 1 A_SpawnItem("K8Gore_CeilBloodSpot_Transient",0,0,0,1)
      TNT1 A 5
      Stop

    Xdeath:
      TNT1 A 1
      Stop
  }
}


Actor K8Gore_DetectCeilBloodSimpler_Transient {
  game Doom
  scale 0.4
  speed 0
  health 1
  radius 1
  height 1
  Gravity 0.0
  damage 0
  Renderstyle Translucent
  Alpha 0.95
  DamageType Blood
  +MISSILE
  +CLIENTSIDEONLY
  +NOTELEPORT
  +NOBLOCKMAP
  +FORCEXYBILLBOARD
  +NODAMAGETHRUST
  -DONTSPLASH
  +NOGRAVITY

  States {
    Spawn:
      TNT1 A 0
      TNT1 A 0 ThrustThingZ(0,35,0,1)
      TNT1 A 2
      Stop

    Death:
      TNT1 A 0
      TNT1 A 0 A_CustomMissile("K8Gore_CeilBloodChecker_Transient", -15, 0, 90, 2, 90)
      Stop
  }
}
