top_srcdir=@top_srcdir@
srcdir=@srcdir@

EXEEXT=@EXEEXT@

VCC=../../utils/vcc/vcc$(EXEEXT)
OUTDIR=../../basev/doom2/progs
COMMON_DIR=$(srcdir)/../common
COMMON_PROGS_DIR=../../basev/common/progs

all: $(OUTDIR)/shared.dat $(OUTDIR)/clprogs.dat $(OUTDIR)/svprogs.dat

install:

distdir:

dist:

clean:
	rm $(OUTDIR)/shared.dat $(OUTDIR)/clprogs.dat $(OUTDIR)/svprogs.dat

$(OUTDIR)/shared.dat: $(VCC) $(srcdir)/shared.vc $(srcdir)/../doom/*.vc \
		$(COMMON_DIR)/*.vc $(COMMON_DIR)/shared/*.vc
	@mkdir -p $(OUTDIR)
	$(VCC) -I$(COMMON_DIR) -P$(COMMON_PROGS_DIR) -P$(OUTDIR) $(srcdir)/shared.vc $@

$(OUTDIR)/clprogs.dat: $(VCC) $(OUTDIR)/shared.dat $(srcdir)/clprogs.vc \
		$(srcdir)/../doom/*.vc $(srcdir)/../doom/cgame/*.vc $(COMMON_DIR)/*.vc \
		$(COMMON_DIR)/shared/*.vc $(COMMON_DIR)/client/*.vc
	@mkdir -p $(OUTDIR)
	$(VCC) -I$(COMMON_DIR) -P$(COMMON_PROGS_DIR) -P$(OUTDIR) $(srcdir)/clprogs.vc $@

$(OUTDIR)/svprogs.dat: $(VCC) $(OUTDIR)/shared.dat $(srcdir)/svprogs.vc \
		$(srcdir)/../doom/*.vc $(srcdir)/../doom/game/*.vc $(srcdir)/../doom/game1/*.vc \
		$(srcdir)/../doom/game2/*.vc $(COMMON_DIR)/*.vc $(COMMON_DIR)/shared/*.vc $(COMMON_DIR)/server/*.vc
	@mkdir -p $(OUTDIR)
	$(VCC) -I$(COMMON_DIR) -P$(COMMON_PROGS_DIR) -P$(OUTDIR) $(srcdir)/svprogs.vc $@
