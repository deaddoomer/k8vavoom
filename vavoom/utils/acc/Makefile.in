top_srcdir=@top_srcdir@
srcdir=@srcdir@
CC=@CC@
CFLAGS=@ACC_CFLAGS@
CPPFLAGS=@ACC_CPPFLAGS@
EXEEXT=@EXEEXT@
LDFLAGS=@ACC_LDFLAGS@
LIBS=@ACC_LIBS@
OBJEXT=@OBJEXT@

CFLAGS += -Wall

OBJS = \
	acc.$(OBJEXT) \
	error.$(OBJEXT) \
	misc.$(OBJEXT) \
	parse.$(OBJEXT) \
	pcode.$(OBJEXT) \
	strlist.$(OBJEXT) \
	symbol.$(OBJEXT) \
	token.$(OBJEXT)

all: ../bin/acc$(EXEEXT)

../bin/acc$(EXEEXT): $(OBJS)
	@mkdir -p ../bin
	$(CC) $(LDFLAGS) $(LIBS) -o $@ $^

%.$(OBJEXT) : $(srcdir)/%.c $(srcdir)/*.h
	$(CC) $(CPPFLAGS) $(CFLAGS) -c -o $@ $<
